
name: "Terraform modules"

on:
  workflow_dispatch:
  pull_request:

jobs:
  terraform:
    name: "Terraform"
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v5
      - name: Set up OpenTofu
        uses: opentofu/setup-opentofu@v1
        with:
          tofu_version: latest
      - name: Format
        run: tofu fmt -check
      - name: Initialize
        run: tofu init -backend=false
      - name: Validate
        run: tofu validate
  checkov:
    name: "Checkov"
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v5
      - name: Checkov
        uses: bridgecrewio/checkov-action@master
        with:
          framework: terraform
